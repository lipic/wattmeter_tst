class evse{constructor(s){this.numEvse=s}createEvseGauge(){this.numEvse>=0&&$('<div class="mt-2 md-2"></div><div class="container" style="width:90%;"><div class="row h-75justify-content-center"><div class="col-" style="width:49%;"><div class="card" id="tCard"><div class="card-body"><div class="d-flex justify-content-center"><div class="row align-items-center"><span class="mr-1" style="color:#888982;"> <i class="fas fa-leaf fa-2x"></i> </span><h3  style="font-weight: bold; color:white" id="eco">ECO</h3></div></div></div></div></div><div class="col-" style="width:2%;"></div><div class="col-" style="width:49%;"><div class="card" id="tCard"><div class="card-body"><div class="d-flex justify-content-center"><div class="row align-items-center"><span class="mr-1" style="color:#828389;"> <i class="fas fa-bolt fa-2x"></i> </span><h3 style="font-weight: bold; color:white" id="fast">FAST</h3></div></div></div></div></div></div></div>').appendTo("#evseGauge");for(var s=translate("state"),e=1;e<=this.numEvse;e++)$('<div class="mt-2 md-2"></div><div class="container" style="width:90%;"><div class="row justify-content-center"><div class="col- " style="width:100%;"><div class="card" style="background: #2C303B;""><div class="card-body"><div class="container-sm mt-1 text-center" style="height:250px;"><span class="dim">EVSE '+e+'</span><div class="text-center"><span class="unit" style="font-size: 20px;">'+s+' </span><span class="value" style="font-size: 20px;" id="EV_STATE'+e+'">-,-</span><br><div class="charging"><div class="top"></div><div class="charge'+(1+4*(e-1))+'"></div><div class="charge'+(2+4*(e-1))+'"></div><div class="charge'+(3+4*(e-1))+'"></div><div class="charge'+(4+4*(e-1))+'"></div></div></div><span class="dim" style="position:relative;margin:auto; top:70px;" id="ACTUAL_OUTPUT_CURRENT'+e+'">-,-</span><br><span class="value" style="font-size: 20px; position:relative;margin:auto;" id="ACTUAL_CONFIG_CURRENT'+e+'">-,-</span></div><style>.charge'+(1+4*(e-1))+",.charge"+(2+4*(e-1))+",.charge"+(3+4*(e-1))+",.charge"+(4+4*(e-1))+"{width:60px;height:130px;background-color:green;position:relative;}.charge"+(1+4*(e-1))+"{bottom:45px;left:5px;animation:charge-1 3s infinite;}.charge"+(2+4*(e-1))+"{bottom:175px;left:70px;animation:charge-2 3s infinite;}.charge"+(3+4*(e-1))+"{bottom:305px;left:135px;animation:charge-3 3s infinite;}.charge"+(4+4*(e-1))+"{bottom:435px;left:200px;animation:charge-4 3s infinite;}</style></div></div></div></div>").appendTo("#evseGauge");1==chargeMode?($("#fast").css("color","#34ECE1"),$("#eco").css("color","white")):($("#eco").css("color","#34ECE1"),$("#fast").css("color","white"))}}$(function(){chargeMode=0,$("div.mainContainer").load("overview",function(){var s="#eco";(0,new Promise(e=>{if(document.querySelector(s))return e(document.querySelector(s));let i=new MutationObserver(t=>{document.querySelector(s)&&(e(document.querySelector(s)),i.disconnect())});i.observe(document.body,{childList:!0,subtree:!0})})).then(s=>{$("#eco").css("color","#34ECE1"),$("#fast").css("color","white"),chargeMode=0,$.ajax({url:"/updateSetting"}).done(function(s){s.hasOwnProperty("chargeMode")&&($("#eco").css("color","#34ECE1"),$("#fast").css("color","white"),1==s.chargeMode&&(chargeMode=1,$("#fast").css("color","#34ECE1"),$("#eco").css("color","white")))})})}),$(document).on("click","#eco",function(){$.ajax({type:"POST",url:"/updateSetting",async:!0,data:JSON.stringify({variable:"chargeMode",value:0}),success:function(s){chargeMode=0,$("#eco").css("color","#34ECE1"),$("#fast").css("color","white")}})}),$(document).on("click","#fast",function(){$.ajax({type:"POST",url:"/updateSetting",async:!0,data:JSON.stringify({variable:"chargeMode",value:0}),success:function(s){chargeMode=1,$("#fast").css("color","#34ECE1"),$("#eco").css("color","white")}})})});